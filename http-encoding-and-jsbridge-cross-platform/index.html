<html>
<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>å…¨é“¾è·¯ HTTP ç¼–è§£ç ï¼šä»å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æ•°æ®æµè½¬ | Rakuyo&#39;s blog</title>

<link rel="shortcut icon" href="https://blog.rakuyo.dev/favicon.ico?v=1769154921003">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://blog.rakuyo.dev/styles/main.css">
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"> -->

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages//dart.min.js"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script> -->
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
    
        <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.1/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script> 
    
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="/">
        <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            Rakuyo&#39;s blog
        </div>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="changeNavbar">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/" class="menu gt-a-link">
                    é¦–é¡µ
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/archives" class="menu gt-a-link">
                    å½’æ¡£
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/tags" class="menu gt-a-link">
                    æ ‡ç­¾
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/reference" class="menu gt-a-link">
                    æ”¶è—
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/about" class="menu gt-a-link">
                    å…³äº
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/friends" class="menu gt-a-link">
                    å‹é“¾
                </a>
                
            </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1769154921003"
                action="/search/">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>
<script>
    /* ç§»åŠ¨ç«¯å¯¼èˆªæ å±•å¼€/æ”¶èµ·åˆ‡æ¢ */
    document.getElementById('changeNavbar').onclick = () => {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else {
            element.style.display = 'none';
        }
    }
</script>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    å…¨é“¾è·¯ HTTP ç¼–è§£ç ï¼šä»å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æ•°æ®æµè½¬
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2025-12-24 Â·
                    </time>
                    
                        <a href="https://blog.rakuyo.dev/tag/android/" class="post-tags">
                            # android
                        </a>
                    
                        <a href="https://blog.rakuyo.dev/tag/java/" class="post-tags">
                            # java
                        </a>
                    
                        <a href="https://blog.rakuyo.dev/tag/ji-suan-ji-wang-luo/" class="post-tags">
                            # è®¡ç®—æœºç½‘ç»œ
                        </a>
                    
                        <a href="https://blog.rakuyo.dev/tag/FeXshwVXj/" class="post-tags">
                            # ios
                        </a>
                    
                </div>
                <div class="post-content">
                    <p>ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨å’Œç½‘ç»œè¯·æ±‚æ‰“äº¤é“ã€‚ä½†ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼šå½“ iOS è°ƒç”¨ <code>URLSession</code> å‘èµ·ä¸€ä¸ª GET è¯·æ±‚æ—¶ï¼Œå‚æ•°é‡Œçš„ä¸­æ–‡æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿåç«¯çš„ Spring æ¡†æ¶åˆæ˜¯å¦‚ä½•è§£æè¿™äº›å‚æ•°çš„ï¼ŸJackson åœ¨å…¶ä¸­æ‰®æ¼”äº†ä»€ä¹ˆè§’è‰²ï¼Ÿ</p>
<p>è¿™ç¯‡æ–‡ç« ä¼šä» HTTP åè®®çš„ç¼–ç è§„èŒƒè®²èµ·ï¼Œæ·±å…¥å®¢æˆ·ç«¯ç½‘ç»œå±‚çš„å®ç°ç»†èŠ‚ï¼Œå†åˆ°æœåŠ¡ç«¯çš„ Jackson ä¸ Spring è¯·æ±‚å¤„ç†ã€‚å¸Œæœ›è¯»å®Œä¹‹åï¼Œä½ å¯¹ã€Œæ•°æ®æ˜¯æ€ä¹ˆåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´æµè½¬çš„ã€èƒ½æœ‰ä¸€ä¸ªå®Œæ•´çš„è®¤è¯†ã€‚</p>
<!-- more -->
<h2 id="1-ç½‘ç»œå±‚ç¼–è§£ç http-åè®®è§†è§’">1. ç½‘ç»œå±‚ç¼–è§£ç ï¼šHTTP åè®®è§†è§’</h2>
<blockquote>
<p>æœ¬ç« èšç„¦ HTTP çš„<strong>ç¼–ç ç»†èŠ‚</strong>ã€‚å¦‚æœä½ å¯¹ HTTP åè®®æœ¬èº«ï¼ˆè¯·æ±‚æ–¹æ³•ã€çŠ¶æ€ç ã€Header è¯­ä¹‰ç­‰ï¼‰è¿˜ä¸å¤ªç†Ÿæ‚‰ï¼Œå¯ä»¥å…ˆé˜…è¯» <a href="/computer-network-http-and-https">è®¡ç®—æœºç½‘ç»œä¹‹äº” - HTTP ä¸ HTTPS</a>ã€‚</p>
</blockquote>
<h3 id="11-http-åè®®æœ¬èº«ä¸åšç¼–ç ">1.1 HTTP åè®®æœ¬èº«ä¸åšç¼–ç </h3>
<p>å…ˆæ¾„æ¸…ä¸€ä¸ªå¸¸è§çš„è¯¯è§£ï¼š<strong>HTTP åè®®æœ¬èº«ä¸æ‰§è¡Œä»»ä½•ç¼–ç æ“ä½œ</strong>ã€‚</p>
<p>HTTP åªæ˜¯ä¸€ä»½è§„èŒƒæ–‡æ¡£ï¼ˆRFC 7230-7235 ç­‰ï¼‰ï¼Œå®ƒè§„å®šäº† â€œæ•°æ®åº”è¯¥ä»¥ä»€ä¹ˆæ ¼å¼ä¼ è¾“â€ï¼Œæ¯”å¦‚ URL ä¸­çš„ä¸­æ–‡è¦ç”¨ Percent-Encodingã€Body çš„æ ¼å¼ç”± Content-Type æŒ‡å®šã€‚ä½†å®ƒä¸ä¼šå¸®ä½ æŠŠä¸­æ–‡å˜æˆ <code>%E4%B8%AD%E6%96%87</code>ï¼Œä¹Ÿä¸ä¼šå¸®ä½ æŠŠå¯¹è±¡åºåˆ—åŒ–æˆ JSONâ€”â€”è¿™äº›å·¥ä½œç”±å„å±‚è½¯ä»¶å®Œæˆã€‚</p>
<h3 id="12-ç¼–ç èŒè´£åˆ†å±‚">1.2 ç¼–ç èŒè´£åˆ†å±‚</h3>
<p>ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„ç¼–ç å·¥ä½œï¼Œç”±å¤šå±‚è½¯ä»¶åä½œå®Œæˆï¼š</p>
<table>
<thead>
<tr>
<th>å±‚çº§</th>
<th>è´Ÿè´£ä»€ä¹ˆ</th>
<th>è°æ¥åš</th>
<th>æ˜¯å¦è‡ªåŠ¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>åº”ç”¨å±‚</td>
<td>å¯¹è±¡ â†’ JSON å­—ç¬¦ä¸²</td>
<td>ä½ çš„ä»£ç è°ƒç”¨ JSONEncoder / Gson</td>
<td>æ‰‹åŠ¨è°ƒç”¨</td>
</tr>
<tr>
<td>HTTP æ¡†æ¶å±‚</td>
<td>URL ç¼–ç ã€HTTP æŠ¥æ–‡å°è£…</td>
<td>URLSession / OkHttp / Alamofire</td>
<td>å¤§éƒ¨åˆ†è‡ªåŠ¨</td>
</tr>
<tr>
<td>ä¼ è¾“å±‚</td>
<td>TCP åˆ†æ®µã€æ ¡éªŒå’Œ</td>
<td>æ“ä½œç³»ç»Ÿç½‘ç»œæ ˆ</td>
<td>å®Œå…¨è‡ªåŠ¨</td>
</tr>
<tr>
<td>ç½‘ç»œå±‚</td>
<td>IP æ•°æ®åŒ…å°è£…</td>
<td>æ“ä½œç³»ç»Ÿç½‘ç»œæ ˆ</td>
<td>å®Œå…¨è‡ªåŠ¨</td>
</tr>
</tbody>
</table>
<p>ç”¨å›¾æ¥è¡¨ç¤ºï¼š</p>
<!--
```mermaid
flowchart TB
    A["ä½ çš„ä»£ç ï¼šUser å¯¹è±¡"] -&#45;>|"JSONEncoder / Gsonï¼ˆæ‰‹åŠ¨è°ƒç”¨ï¼‰"| B["JSON å­—ç¬¦ä¸²ï¼š{&quot;name&quot;:&quot;å¼ ä¸‰&quot;}"]
    B -&#45;>|"HTTP æ¡†æ¶ï¼ˆURLSession / OkHttpï¼‰"| C["HTTP æŠ¥æ–‡ï¼šPOST /api HTTP/1.1..."]
    C -&#45;>|"æ“ä½œç³»ç»Ÿç½‘ç»œæ ˆï¼ˆè‡ªåŠ¨ï¼‰"| D["TCP åˆ†æ®µ â†’ IP æ•°æ®åŒ… â†’ å­—èŠ‚æµ"]

    style A fill:#e1f5fe
    style D fill:#e8f5e9
```
-->
<img src="/post-images/1766573208004.svg" alt="ç¼–ç èŒè´£åˆ†å±‚" width=50%>
<p>å…³é”®ç‚¹ï¼š<strong>JSON åºåˆ—åŒ–ä¸æ˜¯è‡ªåŠ¨çš„</strong>ã€‚å³ä½¿ä½ ç”¨ Alamofire è¿™æ ·çš„é«˜å±‚æ¡†æ¶ï¼Œä¹Ÿéœ€è¦æŒ‡å®šç¼–ç å™¨ï¼ˆå¦‚ <code>JSONParameterEncoder</code>ï¼‰ã€‚æ¡†æ¶åªæ˜¯å¸®ä½ ç®€åŒ–äº†è°ƒç”¨æ–¹å¼ï¼Œåº•å±‚ä»ç„¶æ˜¯æ‰‹åŠ¨è§¦å‘çš„åºåˆ—åŒ–ã€‚</p>
<h3 id="13-ä¸‰ä¸ªç¼–ç åœºæ™¯è¯¦è§£">1.3 ä¸‰ä¸ªç¼–ç åœºæ™¯è¯¦è§£</h3>
<p>åœ¨ä¸€ä¸ª HTTP è¯·æ±‚ä¸­ï¼Œæ•°æ®å¯ä»¥å‡ºç°åœ¨ä¸‰ä¸ªä½ç½®ï¼Œæ¯ä¸ªä½ç½®çš„ç¼–ç è§„åˆ™å’Œå®ç°æ–¹å¼ä¸åŒï¼š</p>
<table>
<thead>
<tr>
<th>ä½ç½®</th>
<th>å…¸å‹åœºæ™¯</th>
<th>ç¼–ç è§„åˆ™</th>
<th>è°æ¥åš</th>
</tr>
</thead>
<tbody>
<tr>
<td>URL Query</td>
<td>GET è¯·æ±‚å‚æ•°</td>
<td>Percent-Encoding</td>
<td>HTTP æ¡†æ¶è‡ªåŠ¨ï¼Œè¾¹ç•Œæƒ…å†µéœ€æ‰‹åŠ¨</td>
</tr>
<tr>
<td>Header</td>
<td>è®¤è¯ä¿¡æ¯ã€è‡ªå®šä¹‰å…ƒæ•°æ®</td>
<td>ASCIIï¼ˆé ASCII éœ€ Base64ï¼‰</td>
<td>æ‰‹åŠ¨å¤„ç†</td>
</tr>
<tr>
<td>Body</td>
<td>POST/PUT è¯·æ±‚ä½“</td>
<td>å–å†³äº Content-Type</td>
<td>åºåˆ—åŒ–æ‰‹åŠ¨ï¼Œå°è£…è‡ªåŠ¨</td>
</tr>
</tbody>
</table>
<p><strong>URL Query ç¼–ç </strong></p>
<p>URL è§„èŒƒï¼ˆRFC 3986ï¼‰è§„å®šï¼ŒQuery ä¸­åªèƒ½åŒ…å«ç‰¹å®šçš„ ASCII å­—ç¬¦ã€‚å¯¹äºä¸­æ–‡ã€ç©ºæ ¼ç­‰å­—ç¬¦ï¼Œå¿…é¡»è¿›è¡Œ Percent-Encodingï¼ˆå…³äº URL çš„å®Œæ•´ç»“æ„ï¼Œå¯å‚è€ƒ <a href="/computer-network-url-and-dns">è®¡ç®—æœºç½‘ç»œä¹‹äºŒ - URL ä¸ DNS</a>ï¼‰ï¼š</p>
<pre><code>åŸå§‹ï¼šname=å¼ ä¸‰&amp;city=åŒ—äº¬
ç¼–ç åï¼šname=%E5%BC%A0%E4%B8%89&amp;city=%E5%8C%97%E4%BA%AC
</code></pre>
<p>è¿™é‡Œæœ‰ä¸ªç»†èŠ‚ç»å¸¸è¢«å¿½ç•¥ï¼š<strong>ç©ºæ ¼</strong>çš„ç¼–ç ã€‚åœ¨ Query ä¸­ï¼Œç©ºæ ¼å¯ä»¥ç¼–ç ä¸º <code>%20</code> æˆ– <code>+</code>ï¼Œä½†ä¸¤è€…çš„è¯­ä¹‰ç•¥æœ‰ä¸åŒã€‚è¡¨å•æäº¤ï¼ˆ<code>application/x-www-form-urlencoded</code>ï¼‰é€šå¸¸ç”¨ <code>+</code>ï¼Œè€Œæ ‡å‡† URL ç¼–ç ç”¨ <code>%20</code>ã€‚</p>
<p><em>è°æ¥åšï¼Ÿ</em> iOS çš„ <code>URLComponents</code>ã€Android çš„ <code>Uri.Builder</code> ä¼šè‡ªåŠ¨ç¼–ç å¤§éƒ¨åˆ†å­—ç¬¦ï¼Œä½† <code>+</code> ç­‰è¾¹ç•Œå­—ç¬¦å¯èƒ½éœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚</p>
<blockquote>
<p>æºç å‚è€ƒï¼š</p>
<ul>
<li>iOS Alamofireï¼š<a href="https://github.com/Alamofire/Alamofire/blob/5.9.1/Source/Core/ParameterEncoder.swift#L174-L185">ParameterEncoder.swift#L174-L185</a></li>
<li>Androidï¼š<a href="https://github.com/square/okhttp/blob/parent-5.3.2/okhttp/src/commonJvmAndroid/kotlin/okhttp3/HttpUrl.kt#L1106-L1123">OkHttp - HttpUrl.kt#L1106-L1123</a></li>
</ul>
</blockquote>
<p><strong>Header ç¼–ç </strong></p>
<p>HTTP Header æœ¬è´¨ä¸Šæ˜¯ ASCII æ–‡æœ¬ã€‚å¦‚æœä½ æƒ³åœ¨ Header é‡Œä¼ ä¸­æ–‡ï¼Œè¦ä¹ˆç”¨ Base64 ç¼–ç ï¼Œè¦ä¹ˆç”¨ RFC 5987 å®šä¹‰çš„æ‰©å±•è¯­æ³•ã€‚å®é™…å¼€å‘ä¸­ï¼Œå»ºè®® Header åªä¼  ASCII å®‰å…¨çš„å†…å®¹ï¼Œå¤æ‚æ•°æ®æ”¾ Bodyã€‚</p>
<p><em>è°æ¥åšï¼Ÿ</em> éœ€è¦ä½ æ‰‹åŠ¨å¤„ç†ã€‚æ¡†æ¶ä¸ä¼šè‡ªåŠ¨å¸®ä½ æŠŠä¸­æ–‡ Base64 ç¼–ç ã€‚</p>
<p><strong>Body ç¼–ç </strong></p>
<p>Body çš„ç¼–ç æ–¹å¼å†³å®šäº†åº”è¯¥è®¾ç½®ä»€ä¹ˆ <code>Content-Type</code>ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®å®ƒæ¥é€‰æ‹©è§£ç æ–¹å¼ï¼š</p>
<ul>
<li><code>application/json</code>ï¼šUTF-8 ç¼–ç çš„ JSON æ–‡æœ¬</li>
<li><code>application/x-www-form-urlencoded</code>ï¼šç±»ä¼¼ URL Query çš„é”®å€¼å¯¹</li>
<li><code>multipart/form-data</code>ï¼šæ–‡ä»¶ä¸Šä¼ å¸¸ç”¨ï¼Œæ¯ä¸ª part æœ‰ç‹¬ç«‹çš„ç¼–ç </li>
</ul>
<p><em>è°æ¥åšï¼Ÿ</em> JSON åºåˆ—åŒ–éœ€è¦ä½ æ‰‹åŠ¨è°ƒç”¨ï¼ˆ<code>JSONEncoder</code> / <code>Gson</code>ï¼‰ï¼Œä¹‹å HTTP æ¡†æ¶ä¼šè‡ªåŠ¨è®¾ç½® <code>Content-Type</code> å¹¶å°è£…åˆ° HTTP æŠ¥æ–‡ä¸­ã€‚</p>
<blockquote>
<p>æºç å‚è€ƒï¼š</p>
<ul>
<li>iOS Alamofireï¼š<a href="https://github.com/Alamofire/Alamofire/blob/5.9.1/Source/Core/ParameterEncoder.swift#L186-L193">ParameterEncoder.swift#L186-L193</a></li>
<li>Android Retrofitï¼š<a href="https://github.com/square/retrofit/blob/parent-2.8.1/retrofit/src/main/java/retrofit2/RequestBuilder.java#L195-L202">RequestBuilder.java#L195-L202</a></li>
</ul>
</blockquote>
<h3 id="14-å¸¸è§ç¼–ç é™·é˜±">1.4 å¸¸è§ç¼–ç é™·é˜±</h3>
<p><strong>ç©ºå€¼å¤„ç†</strong></p>
<p>å½“å‚æ•°å€¼ä¸º <code>null</code> æˆ–ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œä¸åŒçš„ HTTP å®¢æˆ·ç«¯åº“å’Œåç«¯æ¡†æ¶å¤„ç†æ–¹å¼å·®å¼‚å¾ˆå¤§ï¼š</p>
<ul>
<li>æœ‰çš„æ¡†æ¶ä¼šçœç•¥æ•´ä¸ªé”®å€¼å¯¹</li>
<li>æœ‰çš„ä¼šä¿ç•™é”®ä½†å€¼ä¸ºç©ºï¼š<code>key=</code></li>
<li>æœ‰çš„ä¼šä¼ å­—ç¬¦ä¸² <code>&quot;null&quot;</code></li>
</ul>
<p>ä»¥ Alamofire ä¸ºä¾‹ï¼Œå®ƒæä¾›äº†ä¸‰ç§ <code>nil</code> ç¼–ç ç­–ç•¥ï¼š</p>
<pre><code class="language-swift">public struct NilEncoding {
    public static let dropKey = NilEncoding { nil }      // çœç•¥æ•´ä¸ªé”®å€¼å¯¹
    public static let dropValue = NilEncoding { &quot;&quot; }     // ä¿ç•™é”®ï¼Œå€¼ä¸ºç©º
    public static let null = NilEncoding { &quot;null&quot; }      // ç¼–ç ä¸ºå­—ç¬¦ä¸² &quot;null&quot;
}
</code></pre>
<p>è€Œ Gson é»˜è®¤ä¸åºåˆ—åŒ– <code>null</code> å­—æ®µï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨ <code>serializeNulls()</code> æ‰ä¼šè¾“å‡ºï¼š</p>
<pre><code class="language-java">// é»˜è®¤è¡Œä¸ºï¼š{&quot;name&quot;:&quot;å¼ ä¸‰&quot;}ï¼ˆage å­—æ®µè¢«çœç•¥ï¼‰
// è°ƒç”¨ serializeNulls() åï¼š{&quot;name&quot;:&quot;å¼ ä¸‰&quot;,&quot;age&quot;:null}
new GsonBuilder().serializeNulls().create();
</code></pre>
<p>å»ºè®®åœ¨å›¢é˜Ÿå†…æ˜ç¡®çº¦å®šï¼Œé¿å…è”è°ƒæ—¶è¸©å‘ã€‚</p>
<blockquote>
<p>æºç å‚è€ƒï¼š</p>
<ul>
<li>iOS Alamofireï¼š<a href="https://github.com/Alamofire/Alamofire/blob/5.9.1/Source/Features/URLEncodedFormEncoder.swift#L318-L325">URLEncodedFormEncoder.swift#L318-L325</a></li>
<li>Android Gsonï¼š<a href="https://github.com/google/gson/blob/gson-parent-2.13.2/gson/src/main/java/com/google/gson/GsonBuilder.java#L235-L239">GsonBuilder.java#L235-L239</a></li>
</ul>
</blockquote>
<p><strong>æ•°å­—ç²¾åº¦</strong></p>
<p>JavaScript çš„ <code>Number</code> ç±»å‹æ˜¯ IEEE 754 åŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œæœ€å¤§å®‰å…¨æ•´æ•°æ˜¯ <code>2^53 - 1</code>ï¼ˆçº¦ 9007 ä¸‡äº¿ï¼‰ã€‚è¶…è¿‡è¿™ä¸ªèŒƒå›´çš„ IDï¼Œåœ¨ JSON åºåˆ—åŒ–/ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šä¸¢å¤±ç²¾åº¦ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ç”¨å­—ç¬¦ä¸²ä¼ é€’å¤§æ•´æ•°ã€‚</p>
<p><strong>æ—¶é—´æ ¼å¼</strong></p>
<p>ISO 8601ï¼ˆå¦‚ <code>2025-12-24T10:30:00Z</code>ï¼‰æ˜¯æœ€é€šç”¨çš„æ—¶é—´æ ¼å¼ï¼Œä½†è¦æ³¨æ„æ—¶åŒºé—®é¢˜ã€‚æœ‰äº›åç«¯è¿”å›çš„æ˜¯ Unix æ—¶é—´æˆ³ï¼ˆç§’æˆ–æ¯«ç§’ï¼‰ï¼Œæœ‰äº›æ˜¯å¸¦æ—¶åŒºçš„å­—ç¬¦ä¸²ï¼Œæœ‰äº›æ˜¯ UTC æ—¶é—´â€”â€”è”è°ƒå‰åŠ¡å¿…ç¡®è®¤ã€‚</p>
<h3 id="15-æ•°æ®é“¾è·¯æ¦‚è§ˆ">1.5 æ•°æ®é“¾è·¯æ¦‚è§ˆ</h3>
<p>ä¸€ä¸ªå…¸å‹çš„ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®ä¼šç»å†è¿™æ ·çš„é“¾è·¯ï¼š</p>
<!--
```mermaid
flowchart TB
    subgraph å®¢æˆ·ç«¯
        A[ä¸šåŠ¡æ¨¡å‹<br/>Swift Struct / Kotlin Data Class] -&#45;>|åºåˆ—åŒ–<br/>Codable / Gson| B[JSON å­—ç¬¦ä¸²]
        B -&#45;>|UTF-8 ç¼–ç | C[äºŒè¿›åˆ¶å­—èŠ‚æµ]
        C -&#45;>|HTTP åè®®å°è£…| D[ç½‘ç»œè¯·æ±‚]
    end

    D -&#45;>|ç½‘ç»œä¼ è¾“| E[æœåŠ¡ç«¯æ¥æ”¶]

    subgraph æœåŠ¡ç«¯
        E -&#45;>|HTTP åè®®è§£æ| F[äºŒè¿›åˆ¶å­—èŠ‚æµ]
        F -&#45;>|UTF-8 è§£ç | G[JSON å­—ç¬¦ä¸²]
        G -&#45;>|ååºåˆ—åŒ–| H[ä¸šåŠ¡æ¨¡å‹]
    end

    style A fill:#e1f5fe
    style H fill:#e8f5e9
```
-->
<img src="/post-images/1766573208001.svg" alt="HTTP æ•°æ®é“¾è·¯" width=50%>
<p>ç†è§£è¿™ä¸ªé“¾è·¯æœ‰åŠ©äºå®šä½é—®é¢˜ï¼šç¼–ç é—®é¢˜åœ¨å“ªä¸€å±‚äº§ç”Ÿï¼Œå°±åº”è¯¥åœ¨å“ªä¸€å±‚è§£å†³ã€‚</p>
<h2 id="2-ios-ç«¯urlsession-ä¸-alamofire-çš„ç¼–è§£ç é€»è¾‘">2. iOS ç«¯ï¼šURLSession ä¸ Alamofire çš„ç¼–è§£ç é€»è¾‘</h2>
<br>
<h3 id="21-urlsession-çš„é»˜è®¤è¡Œä¸º">2.1 URLSession çš„é»˜è®¤è¡Œä¸º</h3>
<p><strong>URL Query çš„ç»„è£…</strong></p>
<p>ä½¿ç”¨ <code>URLComponents</code> æ„å»º URL æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œ Percent-Encodingï¼š</p>
<pre><code class="language-swift">var components = URLComponents(string: &quot;https://api.example.com/users&quot;)!
components.queryItems = [
    URLQueryItem(name: &quot;name&quot;, value: &quot;å¼ ä¸‰&quot;),
    URLQueryItem(name: &quot;age&quot;, value: &quot;25&quot;)
]
// ç»“æœï¼šhttps://api.example.com/users?name=%E5%BC%A0%E4%B8%89&amp;age=25
</code></pre>
<p>ä½†è¿™é‡Œæœ‰ä¸ªå‘ï¼š<code>URLQueryItem</code> å¯¹æŸäº›å­—ç¬¦çš„ç¼–ç å¯èƒ½ä¸ç¬¦åˆé¢„æœŸã€‚æ¯”å¦‚ <code>+</code> å·é»˜è®¤ä¸ä¼šè¢«ç¼–ç ï¼Œä½†åœ¨æŸäº›åç«¯æ¡†æ¶ä¸­ä¼šè¢«è§£æä¸ºç©ºæ ¼ã€‚å¦‚æœé‡åˆ°è¿™ç±»é—®é¢˜ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨è°ƒç”¨ <code>addingPercentEncoding(withAllowedCharacters:)</code>ã€‚</p>
<p><strong>é¿å…äºŒæ¬¡ç¼–ç </strong></p>
<p><code>URLComponents</code> åœ¨è®¾ç½® <code>queryItems</code> æ—¶ä¼šè‡ªåŠ¨è¿›è¡Œ Percent-Encodingï¼Œæ‰€ä»¥ä½ ä¼ å…¥çš„å€¼åº”è¯¥æ˜¯<strong>åŸå§‹å€¼</strong>ï¼Œè€Œä¸æ˜¯å·²ç¼–ç çš„å€¼ï¼š</p>
<pre><code class="language-swift">// âœ… æ­£ç¡®ï¼šä¼ å…¥åŸå§‹å€¼ï¼ŒURLComponents è‡ªåŠ¨ç¼–ç 
components.queryItems = [URLQueryItem(name: &quot;name&quot;, value: &quot;å¼ ä¸‰&quot;)]
// ç»“æœï¼šname=%E5%BC%A0%E4%B8%89

// âŒ é”™è¯¯ï¼šä¼ å…¥å·²ç¼–ç çš„å€¼ï¼Œä¼šå¯¼è‡´äºŒæ¬¡ç¼–ç 
let encoded = &quot;å¼ ä¸‰&quot;.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)!
components.queryItems = [URLQueryItem(name: &quot;name&quot;, value: encoded)]
// ç»“æœï¼šname=%25E5%25BC%25A0%25E4%25B8%2589ï¼ˆ% è¢«ç¼–ç æˆäº† %25ï¼‰
</code></pre>
<p>é‚£ä»€ä¹ˆæ—¶å€™éœ€è¦æ‰‹åŠ¨è°ƒç”¨ <code>addingPercentEncoding(withAllowedCharacters:)</code>ï¼Ÿ</p>
<ol>
<li><strong>ç›´æ¥æ‹¼æ¥ URL å­—ç¬¦ä¸²æ—¶</strong>ï¼šå¦‚æœä½ ä¸ç”¨ <code>URLComponents</code>ï¼Œè€Œæ˜¯æ‰‹åŠ¨æ‹¼æ¥ URLï¼Œå°±éœ€è¦è‡ªå·±ç¼–ç </li>
<li><strong><code>URLComponents</code> ç¼–ç ä¸ç¬¦åˆé¢„æœŸæ—¶</strong>ï¼šæ¯”å¦‚ <code>+</code> å·é»˜è®¤ä¸ç¼–ç ï¼Œä½†åç«¯ä¼šè§£æä¸ºç©ºæ ¼ï¼Œè¿™æ—¶éœ€è¦æ‰‹åŠ¨å¤„ç†</li>
<li><strong>ä½¿ç”¨ <code>percentEncodedQuery</code> å±æ€§æ—¶</strong>ï¼šè¿™ä¸ªå±æ€§æ¥å—å·²ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œä¸ä¼šå†æ¬¡ç¼–ç </li>
</ol>
<p><strong>å¤„ç†ç‰¹æ®Šå­—ç¬¦</strong></p>
<p><code>URLQueryItem</code> éµå¾ª RFC 3986ï¼Œä½†å®é™…å¼€å‘ä¸­æœ‰å‡ ä¸ªå­—ç¬¦éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>URLQueryItem æ˜¯å¦ç¼–ç </th>
<th>æ½œåœ¨é—®é¢˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>âŒ ä¸ç¼–ç </td>
<td>åç«¯å¯èƒ½è§£æä¸ºç©ºæ ¼</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>âœ… ç¼–ç ä¸º <code>%26</code></td>
<td>-</td>
</tr>
<tr>
<td><code>=</code></td>
<td>âœ… ç¼–ç ä¸º <code>%3D</code></td>
<td>-</td>
</tr>
<tr>
<td><code>#</code></td>
<td>âœ… ç¼–ç ä¸º <code>%23</code></td>
<td>-</td>
</tr>
<tr>
<td><code>%</code></td>
<td>âŒ ä¸ç¼–ç </td>
<td>å¦‚æœåé¢è·Ÿçš„ä¸æ˜¯æœ‰æ•ˆåå…­è¿›åˆ¶ï¼Œå¯èƒ½è§£æå¤±è´¥</td>
</tr>
<tr>
<td>ç©ºæ ¼</td>
<td>âœ… ç¼–ç ä¸º <code>%20</code></td>
<td>-</td>
</tr>
</tbody>
</table>
<p>æœ€å¸¸è¸©å‘çš„æ˜¯ <code>+</code> å·ï¼Œå› ä¸ºå®ƒåœ¨ <code>application/x-www-form-urlencoded</code> è§„èŒƒä¸­ä»£è¡¨ç©ºæ ¼ï¼Œè€Œ <code>URLQueryItem</code> ä¸ä¼šç¼–ç å®ƒã€‚å¦‚æœä½ çš„å‚æ•°å€¼æœ¬èº«åŒ…å« <code>+</code>ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†ï¼š</p>
<pre><code class="language-swift">// é—®é¢˜åœºæ™¯ï¼švalue åŒ…å« + å·
components.queryItems = [URLQueryItem(name: &quot;formula&quot;, value: &quot;1+1=2&quot;)]
// ç»“æœï¼šformula=1+1=2ï¼ˆ+ æœªç¼–ç ï¼Œåç«¯å¯èƒ½è§£æä¸º &quot;1 1=2&quot;ï¼‰

// è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨æ›¿æ¢ + ä¸º %2B
let safeValue = &quot;1+1=2&quot;.replacingOccurrences(of: &quot;+&quot;, with: &quot;%2B&quot;)
components.percentEncodedQuery = &quot;formula=\(safeValue)&quot;
// ç»“æœï¼šformula=1%2B1=2ï¼ˆåç«¯æ­£ç¡®è§£æä¸º &quot;1+1=2&quot;ï¼‰
</code></pre>
<p>æˆ–è€…å°è£…ä¸€ä¸ªæ›´é€šç”¨çš„æ–¹æ³•ï¼š</p>
<pre><code class="language-swift">extension String {
    var urlQueryEncoded: String {
        var allowed = CharacterSet.urlQueryAllowed
        allowed.remove(&quot;+&quot;)  // å°† + ä» &quot;å…è®¸å­—ç¬¦&quot; ä¸­ç§»é™¤ï¼Œå¼ºåˆ¶ç¼–ç 
        return self.addingPercentEncoding(withAllowedCharacters: allowed) ?? self
    }
}

// ä½¿ç”¨
components.percentEncodedQuery = &quot;formula=\(&quot;1+1=2&quot;.urlQueryEncoded)&quot;
</code></pre>
<p><strong>Body çš„ JSON ç¼–ç </strong></p>
<p><code>URLSession</code> æœ¬èº«ä¸æä¾› JSON åºåˆ—åŒ–ï¼Œéœ€è¦é…åˆ <code>JSONEncoder</code>ï¼š</p>
<pre><code class="language-swift">struct User: Codable {
    let name: String
    let age: Int
}

let user = User(name: &quot;å¼ ä¸‰&quot;, age: 25)
let jsonData = try JSONEncoder().encode(user)

var request = URLRequest(url: url)
request.httpMethod = &quot;POST&quot;
request.httpBody = jsonData
request.setValue(&quot;application/json&quot;, forHTTPHeaderField: &quot;Content-Type&quot;)
</code></pre>
<p><code>JSONEncoder</code> æœ‰å‡ ä¸ªå¸¸ç”¨é…ç½®ï¼š</p>
<ul>
<li><code>keyEncodingStrategy</code>ï¼šé©¼å³°è½¬ä¸‹åˆ’çº¿ï¼ˆ<code>.convertToSnakeCase</code>ï¼‰</li>
<li><code>dateEncodingStrategy</code>ï¼šæ—¶é—´æ ¼å¼</li>
<li><code>outputFormatting</code>ï¼šæ˜¯å¦æ ¼å¼åŒ–è¾“å‡ºï¼ˆè°ƒè¯•ç”¨ï¼‰</li>
</ul>
<p><strong>Content-Type çš„é»˜è®¤å¤„ç†</strong></p>
<p><code>URLSession</code> ä¸ä¼šè‡ªåŠ¨è®¾ç½® <code>Content-Type</code>ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šã€‚å¿˜è®°è®¾ç½®çš„è¯ï¼ŒæœåŠ¡ç«¯å¯èƒ½æ— æ³•æ­£ç¡®è§£æè¯·æ±‚ä½“ã€‚</p>
<h3 id="22-alamofire-çš„é»˜è®¤ç¼–ç è¡Œä¸º">2.2 Alamofire çš„é»˜è®¤ç¼–ç è¡Œä¸º</h3>
<p>Alamofire å¯¹å‚æ•°ç¼–ç åšäº†å¾ˆå¥½çš„å°è£…ï¼Œæ ¹æ®è¯·æ±‚æ–¹æ³•è‡ªåŠ¨é€‰æ‹©ç¼–ç æ–¹å¼ï¼š</p>
<table>
<thead>
<tr>
<th>HTTP æ–¹æ³•</th>
<th>é»˜è®¤ç¼–ç æ–¹å¼</th>
<th>å‚æ•°ä½ç½®</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET, HEAD, DELETE</td>
<td>URL Encoding</td>
<td>URL Query</td>
</tr>
<tr>
<td>POST, PUT, PATCH</td>
<td>JSON Encoding</td>
<td>Request Body</td>
</tr>
</tbody>
</table>
<p><strong>å‚æ•°ç¼–ç ç­–ç•¥</strong></p>
<p>Alamofire æä¾›äº†ä¸‰ç§å†…ç½®ç¼–ç å™¨ï¼š</p>
<pre><code class="language-swift">// URL ç¼–ç  - å‚æ•°æ”¾åœ¨ URL Query
AF.request(url, parameters: params, encoder: URLEncodedFormParameterEncoder.default)

// JSON ç¼–ç  - å‚æ•°åºåˆ—åŒ–ä¸º JSON Body
AF.request(url, method: .post, parameters: params, encoder: JSONParameterEncoder.default)

// è¡¨å•ç¼–ç  - multipart/form-data
AF.upload(multipartFormData: { formData in
    formData.append(imageData, withName: &quot;avatar&quot;, fileName: &quot;avatar.jpg&quot;, mimeType: &quot;image/jpeg&quot;)
}, to: url)
</code></pre>
<p><strong>å¸¸è§é…ç½®ç‚¹ä¸æ˜“è¸©å‘</strong></p>
<ol>
<li><strong>æ•°ç»„ç¼–ç æ ¼å¼</strong>ï¼š<code>items[]=1&amp;items[]=2</code> vs <code>items=1&amp;items=2</code>ï¼Œä¸åŒåç«¯æ¡†æ¶æœ‰ä¸åŒåå¥½</li>
<li><strong>å¸ƒå°”å€¼ç¼–ç </strong>ï¼š<code>true</code>/<code>false</code> vs <code>1</code>/<code>0</code></li>
<li><strong>åµŒå¥—å¯¹è±¡</strong>ï¼š<code>user[name]=å¼ ä¸‰</code> vs <code>user.name=å¼ ä¸‰</code></li>
</ol>
<p>Alamofire çš„ <code>URLEncodedFormParameterEncoder</code> æä¾›äº† <code>ArrayEncoding</code> å’Œ <code>BoolEncoding</code> é€‰é¡¹æ¥å¤„ç†è¿™äº›å·®å¼‚ã€‚</p>
<h2 id="3-æœåŠ¡ç«¯jackson-ä¸-spring-çš„ç¼–è§£ç ">3. æœåŠ¡ç«¯ï¼šJackson ä¸ Spring çš„ç¼–è§£ç </h2>
<p>åœ¨çœ‹å®Œå®¢æˆ·ç«¯å¦‚ä½•å¤„ç†ç¼–è§£ç ä¹‹åï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æœåŠ¡ç«¯æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚ç†è§£å…¨é“¾è·¯æœ‰åŠ©äºæ’æŸ¥è”è°ƒé—®é¢˜ã€‚</p>
<blockquote>
<p>æœ¬ç« åŸºäº Java 17 ä¸ Spring Boot 3.3.6ã€‚å³ä½¿ä½ æ²¡æœ‰ Java å¼€å‘ç»éªŒï¼Œä¹Ÿèƒ½è¯»æ‡‚æ ¸å¿ƒé€»è¾‘ã€‚</p>
</blockquote>
<h3 id="31-spring-ä¸-jacksonè°è´Ÿè´£ä»€ä¹ˆ">3.1 Spring ä¸ Jacksonï¼šè°è´Ÿè´£ä»€ä¹ˆ</h3>
<p>å…ˆæ¾„æ¸…ä¸€ä¸ªæ¦‚å¿µï¼š<strong>Spring æœ¬èº«ä¸å¤„ç† JSON ç¼–è§£ç </strong>ï¼Œè¿™ä¸ªå·¥ä½œç”± <strong>Jackson</strong> å®Œæˆã€‚</p>
<p><strong>Jackson</strong> æ˜¯ Java ç”Ÿæ€ä¸­æœ€æµè¡Œçš„ JSON åº“ï¼Œç±»ä¼¼äºï¼š</p>
<ul>
<li>iOS çš„ <code>Codable</code> + <code>JSONEncoder</code> / <code>JSONDecoder</code></li>
<li>Android çš„ <code>Gson</code></li>
<li>JavaScript çš„ <code>JSON.stringify</code> / <code>JSON.parse</code></li>
</ul>
<p><strong>Spring</strong> æ˜¯ Web æ¡†æ¶ï¼Œå®ƒçš„èŒè´£æ˜¯ï¼š</p>
<ul>
<li>æ¥æ”¶ HTTP è¯·æ±‚ï¼Œæå–å‚æ•°</li>
<li>è°ƒç”¨ Jackson è¿›è¡Œ JSON ç¼–è§£ç </li>
<li>è°ƒç”¨ä¸šåŠ¡é€»è¾‘ï¼Œè¿”å›å“åº”</li>
</ul>
<p>ç”¨å›¾æ¥è¡¨ç¤ºï¼š</p>
<!--
```mermaid
sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant Spring as Spring
    participant Jackson as Jackson

    Client->>Spring: POST /users<br/>{"name":"å¼ ä¸‰"}

    Note over Spring: æå– Content-Type<br/>é€‰æ‹© MessageConverter

    Spring->>Jackson: è°ƒç”¨ååºåˆ—åŒ–
    Note over Jackson: readValue()<br/>JSON â†’ Java å¯¹è±¡
    Jackson-&#45;>>Spring: User å¯¹è±¡

    Note over Spring: è°ƒç”¨ä¸šåŠ¡é€»è¾‘<br/>è¿”å› Java å¯¹è±¡

    Spring->>Jackson: è°ƒç”¨åºåˆ—åŒ–
    Note over Jackson: writeValueAsString()<br/>Java å¯¹è±¡ â†’ JSON
    Jackson-&#45;>>Spring: JSON å­—ç¬¦ä¸²

    Spring-&#45;>>Client: {"id":1,"name":"å¼ ä¸‰"}
```
-->
<figure data-type="image" tabindex="1"><img src="https://blog.rakuyo.dev/post-images/spring-jackson-flow.svg" alt="Spring ä¸ Jackson åä½œæµç¨‹" loading="lazy"></figure>
<p>æ‰€ä»¥ï¼Œå½“ä½ é‡åˆ° JSON ç›¸å…³çš„é—®é¢˜æ—¶ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹åº”è¯¥å»çœ‹ Jackson çš„æ–‡æ¡£å’Œé…ç½®ã€‚</p>
<h3 id="32-jackson-æ ¸å¿ƒæœºåˆ¶">3.2 Jackson æ ¸å¿ƒæœºåˆ¶</h3>
<p>Jackson çš„æ ¸å¿ƒæ˜¯ <code>ObjectMapper</code> ç±»ï¼Œå®ƒæä¾›äº†ä¸¤ä¸ªæœ€é‡è¦çš„æ–¹æ³•ï¼š</p>
<pre><code class="language-java">ObjectMapper mapper = new ObjectMapper();

// åºåˆ—åŒ–ï¼šJava å¯¹è±¡ â†’ JSON å­—ç¬¦ä¸²
String json = mapper.writeValueAsString(user);

// ååºåˆ—åŒ–ï¼šJSON å­—ç¬¦ä¸² â†’ Java å¯¹è±¡
User user = mapper.readValue(json, User.class);
</code></pre>
<p><strong>åºåˆ—åŒ–æµç¨‹</strong></p>
<p>å½“è°ƒç”¨ <code>writeValueAsString()</code> æ—¶ï¼ŒJackson å†…éƒ¨ä¼šï¼š</p>
<ol>
<li><strong>æŸ¥æ‰¾åºåˆ—åŒ–å™¨</strong>ï¼šæ ¹æ®å¯¹è±¡ç±»å‹ï¼Œæ‰¾åˆ°å¯¹åº”çš„ <code>JsonSerializer</code></li>
<li><strong>åå°„è·å–å­—æ®µ</strong>ï¼šé€šè¿‡ Java åå°„æœºåˆ¶ï¼Œè·å–å¯¹è±¡çš„æ‰€æœ‰å­—æ®µå’Œ getter æ–¹æ³•</li>
<li><strong>é€ä¸ªåºåˆ—åŒ–</strong>ï¼šå¯¹æ¯ä¸ªå­—æ®µè°ƒç”¨å¯¹åº”çš„åºåˆ—åŒ–å™¨ï¼Œç”Ÿæˆ JSON ç‰‡æ®µ</li>
<li><strong>ç»„è£…è¾“å‡º</strong>ï¼šå°†æ‰€æœ‰ç‰‡æ®µç»„è£…æˆå®Œæ•´çš„ JSON å­—ç¬¦ä¸²</li>
</ol>
<pre><code class="language-java">// ç®€åŒ–çš„åºåˆ—åŒ–æµç¨‹ï¼ˆæºç ä½ç½®ï¼šDefaultSerializerProvider.java#L320ï¼‰
public void serializeValue(JsonGenerator gen, Object value) {
    if (value == null) {
        _serializeNull(gen);
        return;
    }
    // æ ¹æ®å¯¹è±¡ç±»å‹æŸ¥æ‰¾åºåˆ—åŒ–å™¨
    Class&lt;?&gt; cls = value.getClass();
    JsonSerializer&lt;Object&gt; ser = findTypedValueSerializer(cls, true, null);
    // æ‰§è¡Œåºåˆ—åŒ–
    _serialize(gen, value, ser);
}
</code></pre>
<blockquote>
<p>æºç å‚è€ƒï¼š<a href="https://github.com/FasterXML/jackson-databind/blob/jackson-databind-2.17.2/src/main/java/com/fasterxml/jackson/databind/ser/DefaultSerializerProvider.java#L321-L342">DefaultSerializerProvider.java#L321-L342</a></p>
</blockquote>
<p><strong>ååºåˆ—åŒ–æµç¨‹</strong></p>
<p>å½“è°ƒç”¨ <code>readValue()</code> æ—¶ï¼ŒJackson å†…éƒ¨ä¼šï¼š</p>
<ol>
<li><strong>è§£æ JSON</strong>ï¼šå°† JSON å­—ç¬¦ä¸²è§£ææˆ token æµ</li>
<li><strong>æŸ¥æ‰¾ååºåˆ—åŒ–å™¨</strong>ï¼šæ ¹æ®ç›®æ ‡ç±»å‹ï¼Œæ‰¾åˆ°å¯¹åº”çš„ <code>JsonDeserializer</code></li>
<li><strong>åˆ›å»ºå¯¹è±¡å®ä¾‹</strong>ï¼šè°ƒç”¨ç›®æ ‡ç±»çš„æ— å‚æ„é€ å‡½æ•°ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Jackson éœ€è¦æ— å‚æ„é€ å‡½æ•°ï¼‰</li>
<li><strong>å¡«å……å­—æ®µ</strong>ï¼šæ ¹æ® JSON ä¸­çš„ keyï¼Œæ‰¾åˆ°å¯¹åº”çš„å­—æ®µæˆ– setterï¼Œè®¾ç½®å€¼</li>
</ol>
<pre><code class="language-java">// ç®€åŒ–çš„ååºåˆ—åŒ–é€»è¾‘
public &lt;T&gt; T readValue(String content, Class&lt;T&gt; valueType) {
    // åˆ›å»º JSON è§£æå™¨
    JsonParser parser = _jsonFactory.createParser(content);
    // æŸ¥æ‰¾ååºåˆ—åŒ–å™¨å¹¶æ‰§è¡Œ
    return _readMapAndClose(parser, _typeFactory.constructType(valueType));
}
</code></pre>
<p><strong>ç±»å‹æ˜ å°„</strong></p>
<p>Jackson åœ¨åºåˆ—åŒ–/ååºåˆ—åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼š</p>
<table>
<thead>
<tr>
<th>JSON ç±»å‹</th>
<th>Java ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&quot;string&quot;</code></td>
<td><code>String</code></td>
</tr>
<tr>
<td><code>123</code></td>
<td><code>int</code>, <code>long</code>, <code>Integer</code>, <code>Long</code></td>
</tr>
<tr>
<td><code>12.34</code></td>
<td><code>double</code>, <code>float</code>, <code>Double</code>, <code>Float</code>, <code>BigDecimal</code></td>
</tr>
<tr>
<td><code>true</code>/<code>false</code></td>
<td><code>boolean</code>, <code>Boolean</code></td>
</tr>
<tr>
<td><code>null</code></td>
<td><code>null</code>ï¼ˆå¼•ç”¨ç±»å‹ï¼‰</td>
</tr>
<tr>
<td><code>[...]</code></td>
<td><code>List</code>, <code>Set</code>, æ•°ç»„</td>
</tr>
<tr>
<td><code>{...}</code></td>
<td><code>Map</code>, è‡ªå®šä¹‰å¯¹è±¡</td>
</tr>
</tbody>
</table>
<h3 id="33-spring-å¦‚ä½•è°ƒç”¨-jackson">3.3 Spring å¦‚ä½•è°ƒç”¨ Jackson</h3>
<p>Spring é€šè¿‡ <code>HttpMessageConverter</code> æœºåˆ¶æ¥å¤„ç†è¯·æ±‚å’Œå“åº”çš„è½¬æ¢ã€‚å¯¹äº JSONï¼Œä½¿ç”¨çš„æ˜¯ <code>MappingJackson2HttpMessageConverter</code>ã€‚</p>
<p><strong><code>@RequestBody </code> çš„å¤„ç†æµç¨‹</strong></p>
<p>å½“ Spring é‡åˆ° <code>@RequestBody</code> æ³¨è§£æ—¶ï¼š</p>
<pre><code class="language-java">@PostMapping(&quot;/users&quot;)
public User createUser(@RequestBody User user) {
    return userService.save(user);
}
</code></pre>
<p>å†…éƒ¨å¤„ç†æµç¨‹ï¼š</p>
<ol>
<li>Spring æ£€æŸ¥è¯·æ±‚çš„ <code>Content-Type</code>ï¼Œå‘ç°æ˜¯ <code>application/json</code></li>
<li>é€‰æ‹© <code>MappingJackson2HttpMessageConverter</code> æ¥å¤„ç†</li>
<li>Converter å†…éƒ¨è°ƒç”¨ Jackson çš„ <code>ObjectMapper.readValue()</code> è¿›è¡Œååºåˆ—åŒ–</li>
</ol>
<pre><code class="language-java">// AbstractJackson2HttpMessageConverter.javaï¼ˆç®€åŒ–ï¼‰
@Override
protected Object readInternal(Class&lt;?&gt; clazz, HttpInputMessage inputMessage) {
    JavaType javaType = getJavaType(clazz, null);
    return readJavaType(javaType, inputMessage);
}

private Object readJavaType(JavaType javaType, HttpInputMessage inputMessage) {
    ObjectMapper objectMapper = selectObjectMapper(clazz, contentType);
    ObjectReader objectReader = objectMapper.readerFor(javaType);
    // è°ƒç”¨ Jackson è¿›è¡Œååºåˆ—åŒ–
    return objectReader.readValue(inputMessage.getBody());
}
</code></pre>
<blockquote>
<p>æºç å‚è€ƒï¼š<a href="https://github.com/spring-projects/spring-framework/blob/v6.1.14/spring-web/src/main/java/org/springframework/http/converter/json/AbstractJackson2HttpMessageConverter.java#L357-L408">AbstractJackson2HttpMessageConverter.java#L357-L408</a></p>
</blockquote>
<p><strong><code>@ResponseBody</code> çš„å¤„ç†æµç¨‹</strong></p>
<p>å½“æ–¹æ³•è¿”å›å€¼éœ€è¦è½¬æ¢ä¸º JSON æ—¶ï¼ˆ<code>@RestController</code> é»˜è®¤åŒ…å« <code>@ResponseBody</code>ï¼‰ï¼š</p>
<ol>
<li>Spring æ£€æŸ¥å®¢æˆ·ç«¯çš„ <code>Accept</code> å¤´ï¼Œç¡®å®šè¿”å›æ ¼å¼</li>
<li>é€‰æ‹© <code>MappingJackson2HttpMessageConverter</code> æ¥å¤„ç†</li>
<li>Converter å†…éƒ¨è°ƒç”¨ Jackson çš„ <code>ObjectMapper.writeValue()</code> è¿›è¡Œåºåˆ—åŒ–</li>
</ol>
<pre><code class="language-java">// AbstractJackson2HttpMessageConverter.javaï¼ˆç®€åŒ–ï¼‰
@Override
protected void writeInternal(Object object, HttpOutputMessage outputMessage) {
    ObjectMapper objectMapper = selectObjectMapper(object.getClass(), contentType);
    ObjectWriter objectWriter = objectMapper.writer();
    // è°ƒç”¨ Jackson è¿›è¡Œåºåˆ—åŒ–
    objectWriter.writeValue(generator, object);
}
</code></pre>
<blockquote>
<p>æºç å‚è€ƒï¼š<a href="https://github.com/spring-projects/spring-framework/blob/v6.1.14/spring-web/src/main/java/org/springframework/http/converter/json/AbstractJackson2HttpMessageConverter.java#L439-L487">AbstractJackson2HttpMessageConverter.java#L439-L487</a></p>
</blockquote>
<h3 id="34-jackson-å¸¸ç”¨é…ç½®">3.4 Jackson å¸¸ç”¨é…ç½®</h3>
<p>Jackson æ˜¯ Spring é»˜è®¤çš„ JSON åº“ï¼Œå®ƒçš„è¡Œä¸ºå¯ä»¥é€šè¿‡æ³¨è§£æˆ–å…¨å±€é…ç½®æ¥è°ƒæ•´ã€‚</p>
<p><strong>ç©ºå€¼å¤„ç†ï¼š<code>@JsonInclude</code></strong></p>
<p>Jackson é»˜è®¤ä¼šåºåˆ—åŒ–æ‰€æœ‰å­—æ®µï¼ŒåŒ…æ‹¬ <code>null</code>ï¼š</p>
<pre><code class="language-java">public class User {
    private String name = &quot;å¼ ä¸‰&quot;;
    private String email = null;
}
// é»˜è®¤è¾“å‡ºï¼š{&quot;name&quot;:&quot;å¼ ä¸‰&quot;,&quot;email&quot;:null}
</code></pre>
<p>å¦‚æœä½ æƒ³çœç•¥ <code>null</code> å­—æ®µï¼ˆå’Œ Gson é»˜è®¤è¡Œä¸ºä¸€è‡´ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <code>@JsonInclude</code>ï¼š</p>
<pre><code class="language-java">@JsonInclude(JsonInclude.Include.NON_NULL)
public class User {
    private String name = &quot;å¼ ä¸‰&quot;;
    private String email = null;
}
// è¾“å‡ºï¼š{&quot;name&quot;:&quot;å¼ ä¸‰&quot;}
</code></pre>
<p><code>@JsonInclude</code> çš„å¸¸ç”¨é€‰é¡¹ï¼š</p>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>è¡Œä¸º</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALWAYS</code></td>
<td>å§‹ç»ˆåŒ…å«ï¼ˆé»˜è®¤ï¼‰</td>
</tr>
<tr>
<td><code>NON_NULL</code></td>
<td>æ’é™¤ <code>null</code> å€¼</td>
</tr>
<tr>
<td><code>NON_EMPTY</code></td>
<td>æ’é™¤ <code>null</code>ã€ç©ºå­—ç¬¦ä¸²ã€ç©ºé›†åˆ</td>
</tr>
<tr>
<td><code>NON_DEFAULT</code></td>
<td>æ’é™¤ç­‰äºé»˜è®¤å€¼çš„å­—æ®µ</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æºç å‚è€ƒï¼š<a href="https://github.com/FasterXML/jackson-annotations/blob/jackson-annotations-2.17.2/src/main/java/com/fasterxml/jackson/annotation/JsonInclude.java#L113-L241">JsonInclude.java#L113-L241 - Include æšä¸¾</a></p>
</blockquote>
<p><strong>å‘½åç­–ç•¥ï¼šé©¼å³° vs ä¸‹åˆ’çº¿</strong></p>
<p>Java ä¹ æƒ¯ç”¨é©¼å³°å‘½åï¼ˆ<code>userName</code>ï¼‰ï¼Œè€Œå¾ˆå¤š API è§„èŒƒè¦æ±‚ä¸‹åˆ’çº¿ï¼ˆ<code>user_name</code>ï¼‰ã€‚Jackson æä¾›äº† <code>PropertyNamingStrategies</code>ï¼š</p>
<pre><code class="language-java">// å…¨å±€é…ç½®ï¼ˆSpring Boot application.ymlï¼‰
spring:
  jackson:
    property-naming-strategy: SNAKE_CASE

// æˆ–è€…å•ä¸ªç±»é…ç½®
@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)
public class User {
    private String userName;  // åºåˆ—åŒ–ä¸º &quot;user_name&quot;
}
</code></pre>
<p><strong>æ—¶é—´æ ¼å¼</strong></p>
<p>Jackson é»˜è®¤æŠŠ <code>Date</code> åºåˆ—åŒ–ä¸ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰ï¼Œå¦‚æœä½ æƒ³è¦ ISO 8601 æ ¼å¼ï¼š</p>
<pre><code class="language-java">// å…¨å±€é…ç½®
spring:
  jackson:
    date-format: yyyy-MM-dd'T'HH:mm:ss.SSSZ
    time-zone: UTC

// æˆ–è€…å•ä¸ªå­—æ®µé…ç½®
@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;Asia/Shanghai&quot;)
private Date createTime;
</code></pre>
<h3 id="35-url-query-ä¸å­—ç¬¦ç¼–ç ">3.5 URL Query ä¸å­—ç¬¦ç¼–ç </h3>
<p>å‰é¢è®²çš„éƒ½æ˜¯ JSON Body çš„ç¼–è§£ç ï¼Œç”± Jackson è´Ÿè´£ã€‚ä½† <strong>URL Query çš„è§£ç å’Œ Jackson æ— å…³</strong>ï¼Œè¿™éƒ¨åˆ†ç”± Servlet å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰å’Œ Spring å…±åŒå®Œæˆã€‚</p>
<p><strong>è§£ç æµç¨‹æ¦‚è§ˆ</strong></p>
<p>å½“å®¢æˆ·ç«¯å‘é€ <code>GET /users?name=%E5%BC%A0%E4%B8%89&amp;age=25</code> æ—¶ï¼Œè§£ç æµç¨‹å¦‚ä¸‹ï¼š</p>
<!--
```mermaid
flowchart TB
    A["å®¢æˆ·ç«¯å‘é€<br/>GET /users?name=%E5%BC%A0%E4%B8%89&age=25"] -&#45;> B
    B["1. Tomcat æ¥æ”¶è¯·æ±‚<br/>è§£æ Query Stringï¼Œå‚æ•°å€¼ä»æ˜¯ç¼–ç çŠ¶æ€"] -&#45;> C
    C["2. CharacterEncodingFilter<br/>è®¾ç½®è¯·æ±‚å­—ç¬¦ç¼–ç ä¸º UTF-8"] -&#45;> D
    D["3. é¦–æ¬¡è°ƒç”¨ request.getParameter()<br/>Tomcat è§¦å‘å‚æ•°è§£æ<br/>%E5%BC%A0%E4%B8%89 â†’ å­—èŠ‚åºåˆ— â†’ UTF-8 è§£ç  â†’ å¼ ä¸‰"] -&#45;> E
    E["4. Spring @RequestParam ç»‘å®š<br/>è·å–å·²è§£ç çš„å€¼ï¼Œè¿›è¡Œç±»å‹è½¬æ¢"] -&#45;> F
    F["ä½ çš„ä»£ç æ”¶åˆ°<br/>name = å¼ ä¸‰, age = 25"]

    style A fill:#e3f2fd
    style F fill:#e8f5e9
```
-->
<img src="/post-images/url-query-decode-flow.svg" alt="URL Query è§£ç æµç¨‹" width=50%>
<p><strong>Tomcat çš„å‚æ•°è§£ç </strong></p>
<p>Tomcat åœ¨é¦–æ¬¡è°ƒç”¨ <code>request.getParameter()</code> æ—¶æ‰ä¼šè§£æå‚æ•°ï¼ˆå»¶è¿Ÿè§£æï¼‰ã€‚æ ¸å¿ƒé€»è¾‘åœ¨ <code>Parameters</code> ç±»ä¸­ï¼š</p>
<pre><code class="language-java">// Tomcat Parameters.javaï¼ˆç®€åŒ–ï¼‰
private void processParameters(byte[] bytes, int start, int len, Charset charset) {
    int pos = start;
    int end = start + len;

    while (pos &lt; end) {
        // æ‰¾åˆ° key=value å¯¹
        int nameStart = pos;
        int nameEnd = -1;
        int valueStart = -1;
        int valueEnd = -1;

        // è§£æ key å’Œ value çš„è¾¹ç•Œ
        while (pos &lt; end) {
            byte b = bytes[pos];
            if (b == '=' &amp;&amp; nameEnd == -1) {
                nameEnd = pos;
                valueStart = pos + 1;
            } else if (b == '&amp;') {
                valueEnd = pos;
                break;
            }
            pos++;
        }

        // å¯¹ key å’Œ value è¿›è¡Œ URL è§£ç 
        // %E5%BC%A0 â†’ 0xE5 0xBC 0xA0 â†’ &quot;å¼ &quot;ï¼ˆUTF-8ï¼‰
        String name = urlDecode(bytes, nameStart, nameEnd, charset);
        String value = urlDecode(bytes, valueStart, valueEnd, charset);

        addParameter(name, value);
    }
}
</code></pre>
<blockquote>
<p>æºç å‚è€ƒï¼š<a href="https://github.com/apache/tomcat/blob/10.1.34/java/org/apache/tomcat/util/http/Parameters.java#L234-L463">Tomcat Parameters.java#L234-L463</a></p>
</blockquote>
<p><strong>Spring çš„ <code>@RequestParam</code> å¤„ç†</strong></p>
<p>Spring é€šè¿‡ <code>RequestParamMethodArgumentResolver</code> å¤„ç† <code>@RequestParam</code> æ³¨è§£ï¼š</p>
<pre><code class="language-java">@GetMapping(&quot;/users&quot;)
public List&lt;User&gt; getUsers(
    @RequestParam String name,  // è‡ªåŠ¨è§£ç ä¸º &quot;å¼ ä¸‰&quot;
    @RequestParam int age       // è‡ªåŠ¨è½¬æ¢ä¸ºæ•´æ•° 25
) {
    // ...
}
</code></pre>
<p>Spring å†…éƒ¨çš„å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="language-java">// RequestParamMethodArgumentResolver.javaï¼ˆç®€åŒ–ï¼‰
@Override
protected Object resolveName(String name, MethodParameter parameter,
                             NativeWebRequest request) throws Exception {
    HttpServletRequest servletRequest = request.getNativeRequest(HttpServletRequest.class);

    // è°ƒç”¨ Servlet API è·å–å‚æ•°ï¼ˆæ­¤æ—¶ Tomcat å·²å®Œæˆè§£ç ï¼‰
    String[] paramValues = servletRequest.getParameterValues(name);

    if (paramValues != null) {
        return paramValues.length == 1 ? paramValues[0] : paramValues;
    }
    return null;
}
</code></pre>
<blockquote>
<p>æºç å‚è€ƒï¼š<a href="https://github.com/spring-projects/spring-framework/blob/v6.1.14/spring-web/src/main/java/org/springframework/web/method/annotation/RequestParamMethodArgumentResolver.java#L160-L190">RequestParamMethodArgumentResolver.java#L160-L190</a></p>
</blockquote>
<p><strong>CharacterEncodingFilter çš„ä½œç”¨</strong></p>
<p>Spring Boot é»˜è®¤é…ç½®äº† <code>CharacterEncodingFilter</code>ï¼Œç¡®ä¿ Tomcat ä½¿ç”¨ UTF-8 è§£ç å‚æ•°ï¼š</p>
<pre><code class="language-java">// CharacterEncodingFilter.javaï¼ˆç®€åŒ–ï¼‰
@Override
protected void doFilterInternal(HttpServletRequest request,
                                HttpServletResponse response,
                                FilterChain filterChain) {
    String encoding = getEncoding();  // é»˜è®¤ UTF-8

    // åœ¨ Tomcat è§£æå‚æ•°ä¹‹å‰è®¾ç½®ç¼–ç 
    if (isForceRequestEncoding() || request.getCharacterEncoding() == null) {
        request.setCharacterEncoding(encoding);
    }
    if (isForceResponseEncoding()) {
        response.setCharacterEncoding(encoding);
    }

    filterChain.doFilter(request, response);
}
</code></pre>
<blockquote>
<p>æºç å‚è€ƒï¼š<a href="https://github.com/spring-projects/spring-framework/blob/v6.1.14/spring-web/src/main/java/org/springframework/web/filter/CharacterEncodingFilter.java#L187-L202">CharacterEncodingFilter.java#L187-L202</a></p>
</blockquote>
<p><strong>ä¸ºä»€ä¹ˆé¡ºåºå¾ˆé‡è¦ï¼Ÿ</strong></p>
<p><code>CharacterEncodingFilter</code> å¿…é¡»åœ¨å‚æ•°è§£æä¹‹å‰æ‰§è¡Œï¼Œå¦åˆ™ Tomcat ä¼šä½¿ç”¨é»˜è®¤ç¼–ç ï¼ˆé€šå¸¸æ˜¯ ISO-8859-1ï¼‰è§£ç å‚æ•°ï¼Œå¯¼è‡´ä¸­æ–‡ä¹±ç ã€‚Spring Boot é»˜è®¤å°†è¿™ä¸ª Filter é…ç½®ä¸ºæœ€é«˜ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šé‡åˆ°é—®é¢˜ã€‚</p>
<p>å¦‚æœé‡åˆ° URL Query ä¸­æ–‡ä¹±ç ï¼Œæ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li><code>CharacterEncodingFilter</code> æ˜¯å¦æ­£ç¡®é…ç½®</li>
<li>Tomcat çš„ <code>URIEncoding</code> é…ç½®ï¼ˆ<code>server.xml</code> ä¸­çš„ Connector é…ç½®ï¼‰</li>
<li>å®¢æˆ·ç«¯æ˜¯å¦ä½¿ç”¨ UTF-8 ç¼–ç </li>
</ol>
<h3 id="36-å¸¸è§é—®é¢˜æ’æŸ¥">3.6 å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<p><strong>é—®é¢˜ 1ï¼šå®¢æˆ·ç«¯å‘é€çš„ JSON å­—æ®µï¼Œåç«¯æ”¶åˆ°æ˜¯ null</strong></p>
<p>å¯èƒ½åŸå› ï¼š</p>
<ol>
<li><strong>å‘½åä¸ä¸€è‡´</strong>ï¼šå®¢æˆ·ç«¯å‘ <code>user_name</code>ï¼Œåç«¯å­—æ®µæ˜¯ <code>userName</code>ï¼Œä¸”æ²¡é…ç½® <code>SNAKE_CASE</code></li>
<li><strong>ç±»å‹ä¸åŒ¹é…</strong>ï¼šå®¢æˆ·ç«¯å‘å­—ç¬¦ä¸² <code>&quot;25&quot;</code>ï¼Œåç«¯æœŸæœ› <code>int</code>ï¼ˆJackson é€šå¸¸èƒ½è‡ªåŠ¨è½¬æ¢ï¼Œä½†å¤æ‚ç±»å‹å¯èƒ½å¤±è´¥ï¼‰</li>
<li><strong>ç¼ºå°‘æ— å‚æ„é€ å‡½æ•°</strong>ï¼šJackson ååºåˆ—åŒ–éœ€è¦æ— å‚æ„é€ å‡½æ•°</li>
</ol>
<p><strong>é—®é¢˜ 2ï¼šåç«¯è¿”å›çš„ JSON å­—æ®µé¡ºåºå’Œé¢„æœŸä¸åŒ</strong></p>
<p>Jackson é»˜è®¤ä¸ä¿è¯å­—æ®µé¡ºåºã€‚å¦‚æœæœ‰é¡ºåºè¦æ±‚ï¼Œä½¿ç”¨ <code>@JsonPropertyOrder</code>ï¼š</p>
<pre><code class="language-java">@JsonPropertyOrder({&quot;id&quot;, &quot;name&quot;, &quot;email&quot;})
public class User { ... }
</code></pre>
<p><strong>é—®é¢˜ 3ï¼šå‰åç«¯ç©ºå€¼çº¦å®šä¸ä¸€è‡´</strong></p>
<p>è¿™æ˜¯è”è°ƒä¸­æœ€å¸¸è§çš„é—®é¢˜ã€‚å»ºè®®å›¢é˜Ÿç»Ÿä¸€çº¦å®šï¼š</p>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>å®¢æˆ·ç«¯è¡Œä¸º</th>
<th>åç«¯è¡Œä¸º</th>
</tr>
</thead>
<tbody>
<tr>
<td>å­—æ®µä¸ä¼ </td>
<td>ä¸åŒ…å«è¯¥ key</td>
<td>ä½¿ç”¨é»˜è®¤å€¼æˆ–åˆ¤æ–­ä¸º null</td>
</tr>
<tr>
<td>ä¼  null</td>
<td><code>&quot;field&quot;: null</code></td>
<td>æ¥æ”¶ä¸º null</td>
</tr>
<tr>
<td>ä¼ ç©ºå­—ç¬¦ä¸²</td>
<td><code>&quot;field&quot;: &quot;&quot;</code></td>
<td>æ¥æ”¶ä¸ºç©ºå­—ç¬¦ä¸²ï¼ˆæ³¨æ„ï¼šä¸ç­‰äº nullï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="37-ä¸å®¢æˆ·ç«¯ç¼–ç çš„å¯¹åº”å…³ç³»">3.7 ä¸å®¢æˆ·ç«¯ç¼–ç çš„å¯¹åº”å…³ç³»</h3>
<table>
<thead>
<tr>
<th>å®¢æˆ·ç«¯æ“ä½œ</th>
<th>åç«¯å¤„ç†</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>URLComponents</code> ç¼–ç ä¸­æ–‡</td>
<td><code>@RequestParam</code> è‡ªåŠ¨ URL è§£ç </td>
</tr>
<tr>
<td><code>JSONEncoder</code> åºåˆ—åŒ–å¯¹è±¡</td>
<td>Jackson ååºåˆ—åŒ–ä¸º Java å¯¹è±¡</td>
</tr>
<tr>
<td>è®¾ç½® <code>Content-Type: application/json</code></td>
<td>Spring é€‰æ‹© <code>MappingJackson2HttpMessageConverter</code></td>
</tr>
<tr>
<td>Alamofire <code>JSONParameterEncoder</code></td>
<td>ç­‰åŒäºä¸Šè¿°ç»„åˆ</td>
</tr>
</tbody>
</table>
<p>ç†è§£äº†è¿™ä¸ªå¯¹åº”å…³ç³»ï¼Œè”è°ƒæ—¶é‡åˆ°é—®é¢˜å°±çŸ¥é“è¯¥ä»å“ªè¾¹æ’æŸ¥äº†ã€‚</p>
<h2 id="4-å»¶ä¼¸é˜…è¯»js-bridge-çš„ç¼–è§£ç é€»è¾‘">4. å»¶ä¼¸é˜…è¯»ï¼šJS Bridge çš„ç¼–è§£ç é€»è¾‘</h2>
<p>å¦‚æœä½ å¯¹ Native ä¸ H5 ä¹‹é—´çš„ JS Bridge é€šä¿¡æœºåˆ¶æ„Ÿå…´è¶£ï¼Œå¯ä»¥é˜…è¯»è¿™ç¯‡ç‹¬ç«‹çš„è§£ææ–‡ç« ï¼š</p>
<p>ğŸ‘‰ <a href="/jsbridge-encoding-ios-android-h5">iOS &amp; Android &amp; H5 ä¸‰ç«¯ JS Bridge çš„ç¼–è§£ç é€»è¾‘ä¸æºç åˆ†æ</a></p>
<p>è¿™ç¯‡æ–‡ç« ä»æºç å±‚é¢æ‹†è§£äº† JS Bridge çš„ç¼–è§£ç é€»è¾‘ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ¶ˆæ¯ç»“æ„ä¸å›è°ƒæœºåˆ¶</li>
<li>iOSï¼ˆ<a href="https://github.com/marcuswestin/WebViewJavascriptBridge/tree/v6.0.3">marcuswestin/WebViewJavascriptBridge</a>ï¼‰çš„å®ç°ç»†èŠ‚</li>
<li>Androidï¼ˆ<a href="https://github.com/wendux/WebViewJavascriptBridge/tree/25dbf77b83a2da3a420e868b70948e7e56b87847">wendux/WebViewJavascriptBridge</a>ï¼‰çš„å®ç°ç»†èŠ‚</li>
<li>H5 ç«¯çš„ JavaScript æ³¨å…¥ä¸æ¶ˆæ¯å¤„ç†</li>
<li>ä¸‰ç«¯çš„å·®å¼‚ä¸æ³¨æ„ç‚¹</li>
</ul>
<h2 id="5-æ€»ç»“">5. æ€»ç»“</h2>
<br>
<h3 id="51-å…¨é“¾è·¯ç¼–è§£ç æ¦‚è§ˆ">5.1 å…¨é“¾è·¯ç¼–è§£ç æ¦‚è§ˆ</h3>
<p>ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªå®Œæ•´çš„ HTTP è¯·æ±‚-å“åº”å‘¨æœŸä¸­ï¼Œæ•°æ®ç»å†çš„ç¼–è§£ç è¿‡ç¨‹ï¼š</p>
<!--
```mermaid
sequenceDiagram
    autonumber
    participant Client as å®¢æˆ·ç«¯
    participant Network as ç½‘ç»œä¼ è¾“
    participant Server as æœåŠ¡ç«¯

    rect rgb(227, 242, 253)
        Note over Client: ã€ç¼–ç é˜¶æ®µã€‘
        Client->>Client: URL Query: URLComponents è‡ªåŠ¨ç¼–ç 
        Client->>Client: JSON Body: JSONEncoder/Gson æ‰‹åŠ¨è°ƒç”¨
        Client->>Client: HTTP æŠ¥æ–‡: æ¡†æ¶è‡ªåŠ¨å°è£…
    end

    Client->>Network: HTTP è¯·æ±‚ï¼ˆUTF-8 å­—èŠ‚æµï¼‰

    rect rgb(232, 245, 233)
        Note over Server: ã€è§£ç é˜¶æ®µã€‘
        Network->>Server: æ¥æ”¶è¯·æ±‚
        Server->>Server: URL Query: Tomcat è‡ªåŠ¨è§£ç 
        Server->>Server: JSON Body: Jackson è‡ªåŠ¨è§£ç 
        Server->>Server: ä¸šåŠ¡å¤„ç†
    end

    rect rgb(232, 245, 233)
        Note over Server: ã€ç¼–ç é˜¶æ®µã€‘
        Server->>Server: JSON Body: Jackson è‡ªåŠ¨ç¼–ç 
    end

    Server->>Network: HTTP å“åº”ï¼ˆUTF-8 å­—èŠ‚æµï¼‰

    rect rgb(227, 242, 253)
        Note over Client: ã€è§£ç é˜¶æ®µã€‘
        Network->>Client: æ¥æ”¶å“åº”
        Client->>Client: JSON Body: JSONDecoder/Gson æ‰‹åŠ¨è°ƒç”¨
    end
```
-->
<figure data-type="image" tabindex="2"><img src="https://blog.rakuyo.dev/post-images/full-link-encoding-flow.svg" alt="å…¨é“¾è·¯ç¼–è§£ç æµç¨‹" loading="lazy"></figure>
<h3 id="52-æŒ‰è¯·æ±‚ç±»å‹çš„ç¼–è§£ç å¯¹ç…§">5.2 æŒ‰è¯·æ±‚ç±»å‹çš„ç¼–è§£ç å¯¹ç…§</h3>
<p>ä¸åŒçš„è¯·æ±‚ç±»å‹ï¼Œç¼–è§£ç çš„æ–¹å¼å’Œè´Ÿè´£äººä¸åŒï¼š</p>
<p><strong>GET è¯·æ±‚ï¼ˆå‚æ•°åœ¨ URL Queryï¼‰</strong></p>
<table>
<thead>
<tr>
<th>é˜¶æ®µ</th>
<th>ä½ç½®</th>
<th>è´Ÿè´£äºº</th>
<th>è‡ªåŠ¨/æ‰‹åŠ¨</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å®¢æˆ·ç«¯ç¼–ç </td>
<td>URL Query</td>
<td><code>URLComponents</code> / <code>Uri.Builder</code></td>
<td>âœ… è‡ªåŠ¨</td>
<td>Percent-Encoding</td>
</tr>
<tr>
<td>æœåŠ¡ç«¯è§£ç </td>
<td>URL Query</td>
<td>Tomcatï¼ˆServlet å®¹å™¨ï¼‰</td>
<td>âœ… è‡ªåŠ¨</td>
<td><code>request.getParameter()</code> æ—¶è§£ç </td>
</tr>
</tbody>
</table>
<p><strong>POST / PUT / PATCH è¯·æ±‚ï¼ˆJSON Bodyï¼‰</strong></p>
<table>
<thead>
<tr>
<th>é˜¶æ®µ</th>
<th>ä½ç½®</th>
<th>è´Ÿè´£äºº</th>
<th>è‡ªåŠ¨/æ‰‹åŠ¨</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å®¢æˆ·ç«¯ç¼–ç </td>
<td>Body</td>
<td><code>JSONEncoder</code> / <code>Gson</code></td>
<td>âš ï¸ æ‰‹åŠ¨è°ƒç”¨</td>
<td>éœ€æ˜¾å¼è°ƒç”¨åºåˆ—åŒ–æ–¹æ³•</td>
</tr>
<tr>
<td>æœåŠ¡ç«¯è§£ç </td>
<td>Body</td>
<td>Jackson</td>
<td>âœ… è‡ªåŠ¨</td>
<td><code>@RequestBody</code> è§¦å‘è‡ªåŠ¨ååºåˆ—åŒ–</td>
</tr>
<tr>
<td>æœåŠ¡ç«¯ç¼–ç </td>
<td>Body</td>
<td>Jackson</td>
<td>âœ… è‡ªåŠ¨</td>
<td><code>@ResponseBody</code> è§¦å‘è‡ªåŠ¨åºåˆ—åŒ–</td>
</tr>
<tr>
<td>å®¢æˆ·ç«¯è§£ç </td>
<td>Body</td>
<td><code>JSONDecoder</code> / <code>Gson</code></td>
<td>âš ï¸ æ‰‹åŠ¨è°ƒç”¨</td>
<td>éœ€æ˜¾å¼è°ƒç”¨ååºåˆ—åŒ–æ–¹æ³•</td>
</tr>
</tbody>
</table>
<p><strong>POST è¯·æ±‚ï¼ˆForm URL-Encodedï¼‰</strong></p>
<table>
<thead>
<tr>
<th>é˜¶æ®µ</th>
<th>ä½ç½®</th>
<th>è´Ÿè´£äºº</th>
<th>è‡ªåŠ¨/æ‰‹åŠ¨</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å®¢æˆ·ç«¯ç¼–ç </td>
<td>Body</td>
<td>HTTP æ¡†æ¶ï¼ˆAlamofire / OkHttpï¼‰</td>
<td>âœ… è‡ªåŠ¨</td>
<td>ç±»ä¼¼ URL Query çš„ç¼–ç </td>
</tr>
<tr>
<td>æœåŠ¡ç«¯è§£ç </td>
<td>Body</td>
<td>Tomcatï¼ˆServlet å®¹å™¨ï¼‰</td>
<td>âœ… è‡ªåŠ¨</td>
<td>ä¸ URL Query å¤„ç†æ–¹å¼ç›¸åŒ</td>
</tr>
</tbody>
</table>
<h3 id="53-ç¼–è§£ç è´£ä»»é€ŸæŸ¥è¡¨">5.3 ç¼–è§£ç è´£ä»»é€ŸæŸ¥è¡¨</h3>
<table>
<thead>
<tr>
<th>æ•°æ®ä½ç½®</th>
<th>å®¢æˆ·ç«¯ç¼–ç </th>
<th>æœåŠ¡ç«¯è§£ç </th>
<th>æœåŠ¡ç«¯ç¼–ç </th>
<th>å®¢æˆ·ç«¯è§£ç </th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>URL Query</strong></td>
<td>URLComponents</td>
<td>Tomcat</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>JSON Body</strong></td>
<td>JSONEncoder/Gson</td>
<td>Jackson</td>
<td>Jackson</td>
<td>JSONDecoder/Gson</td>
</tr>
<tr>
<td><strong>Form Body</strong></td>
<td>HTTP æ¡†æ¶</td>
<td>Tomcat</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><strong>Header</strong></td>
<td>æ‰‹åŠ¨å¤„ç†</td>
<td>æ‰‹åŠ¨å¤„ç†</td>
<td>æ‰‹åŠ¨å¤„ç†</td>
<td>æ‰‹åŠ¨å¤„ç†</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ğŸ’¡ <strong>è®°å¿†æŠ€å·§</strong>ï¼šURL ç›¸å…³çš„ç¼–è§£ç ç”±ã€ŒURL å¤„ç†ç»„ä»¶ã€è´Ÿè´£ï¼ˆURLComponentsã€Tomcatï¼‰ï¼ŒJSON ç›¸å…³çš„ç”±ã€ŒJSON åº“ã€è´Ÿè´£ï¼ˆJSONEncoderã€Jacksonã€Gsonï¼‰ã€‚</p>
</blockquote>
<h3 id="54-ç»Ÿä¸€ç¼–ç è§„èŒƒçš„ä»·å€¼">5.4 ç»Ÿä¸€ç¼–ç è§„èŒƒçš„ä»·å€¼</h3>
<p>é€šè¿‡è¿™ç¯‡æ–‡ç« çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š<strong>ç¼–è§£ç é—®é¢˜å¾€å¾€ä¸æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œè€Œæ˜¯çº¦å®šé—®é¢˜</strong>ã€‚</p>
<p>æ— è®ºæ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„ HTTP æ¥å£ï¼Œåªè¦å„ç«¯çº¦å®šå¥½ï¼š</p>
<ul>
<li>å­—ç¬¦é›†ç»Ÿä¸€ç”¨ UTF-8</li>
<li>æ—¶é—´æ ¼å¼ç»Ÿä¸€ç”¨ ISO 8601 æˆ–æ—¶é—´æˆ³</li>
<li>ç©ºå€¼ç»Ÿä¸€ç”¨ <code>null</code> è¿˜æ˜¯çœç•¥</li>
<li>å¤§æ•´æ•°ç»Ÿä¸€ç”¨å­—ç¬¦ä¸²</li>
</ul>
<p>å°±èƒ½é¿å…ç»å¤§å¤šæ•°è”è°ƒé—®é¢˜ã€‚</p>
<hr>
<br>
<p>è‡³æ­¤ï¼Œå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„å…¨éƒ¨å†…å®¹äº†ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å»ºç«‹èµ·å¯¹ HTTP ç¼–ç çš„æ•´ä½“è®¤è¯†ã€‚ä¸‹æ¬¡é‡åˆ°ã€Œä¹±ç ã€ã€ã€Œå­—æ®µä¸¢å¤±ã€è¿™ç±»é—®é¢˜æ—¶ï¼Œå¸Œæœ›ä½ èƒ½çŸ¥é“è¯¥ä»å“ªé‡Œå¼€å§‹æ’æŸ¥äº†ã€‚</p>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="https://blog.rakuyo.dev/console-log-reference-trap-and-devtools-lazy-expansion/" class="post-title gt-a-link">
                    JavaScript console.log æ‰“å°å¯¹è±¡çš„å¼•ç”¨é™·é˜±ä¸ DevTools å»¶è¿Ÿå±•å¼€æœºåˆ¶
                </a>
            </div>
        

        

        
            
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
<script>
    // md5.min.js
    !function(n){
        "use strict";
        function d(n,t){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}
        function f(n,t,r,e,o,u){return d((c=d(d(t,n),d(e,u)))<<(f=o)|c>>>32-f,r);var c,f}
        function l(n,t,r,e,o,u,c){return f(t&r|~t&e,n,t,o,u,c)}
        function v(n,t,r,e,o,u,c){return f(t&e|r&~e,n,t,o,u,c)}
        function g(n,t,r,e,o,u,c){return f(t^r^e,n,t,o,u,c)}
        function m(n,t,r,e,o,u,c){return f(r^(t|~e),n,t,o,u,c)}
        function i(n,t){var r,e,o,u,c;n[t>>5]|=128<<t%32,n[14+(t+64>>>9<<4)]=t;var f=1732584193,i=-271733879,a=-1732584194,h=271733878;for(r=0;r<n.length;r+=16)f=l(e=f,o=i,u=a,c=h,n[r],7,-680876936),h=l(h,f,i,a,n[r+1],12,-389564586),a=l(a,h,f,i,n[r+2],17,606105819),i=l(i,a,h,f,n[r+3],22,-1044525330),f=l(f,i,a,h,n[r+4],7,-176418897),h=l(h,f,i,a,n[r+5],12,1200080426),a=l(a,h,f,i,n[r+6],17,-1473231341),i=l(i,a,h,f,n[r+7],22,-45705983),f=l(f,i,a,h,n[r+8],7,1770035416),h=l(h,f,i,a,n[r+9],12,-1958414417),a=l(a,h,f,i,n[r+10],17,-42063),i=l(i,a,h,f,n[r+11],22,-1990404162),f=l(f,i,a,h,n[r+12],7,1804603682),h=l(h,f,i,a,n[r+13],12,-40341101),a=l(a,h,f,i,n[r+14],17,-1502002290),f=v(f,i=l(i,a,h,f,n[r+15],22,1236535329),a,h,n[r+1],5,-165796510),h=v(h,f,i,a,n[r+6],9,-1069501632),a=v(a,h,f,i,n[r+11],14,643717713),i=v(i,a,h,f,n[r],20,-373897302),f=v(f,i,a,h,n[r+5],5,-701558691),h=v(h,f,i,a,n[r+10],9,38016083),a=v(a,h,f,i,n[r+15],14,-660478335),i=v(i,a,h,f,n[r+4],20,-405537848),f=v(f,i,a,h,n[r+9],5,568446438),h=v(h,f,i,a,n[r+14],9,-1019803690),a=v(a,h,f,i,n[r+3],14,-187363961),i=v(i,a,h,f,n[r+8],20,1163531501),f=v(f,i,a,h,n[r+13],5,-1444681467),h=v(h,f,i,a,n[r+2],9,-51403784),a=v(a,h,f,i,n[r+7],14,1735328473),f=g(f,i=v(i,a,h,f,n[r+12],20,-1926607734),a,h,n[r+5],4,-378558),h=g(h,f,i,a,n[r+8],11,-2022574463),a=g(a,h,f,i,n[r+11],16,1839030562),i=g(i,a,h,f,n[r+14],23,-35309556),f=g(f,i,a,h,n[r+1],4,-1530992060),h=g(h,f,i,a,n[r+4],11,1272893353),a=g(a,h,f,i,n[r+7],16,-155497632),i=g(i,a,h,f,n[r+10],23,-1094730640),f=g(f,i,a,h,n[r+13],4,681279174),h=g(h,f,i,a,n[r],11,-358537222),a=g(a,h,f,i,n[r+3],16,-722521979),i=g(i,a,h,f,n[r+6],23,76029189),f=g(f,i,a,h,n[r+9],4,-640364487),h=g(h,f,i,a,n[r+12],11,-421815835),a=g(a,h,f,i,n[r+15],16,530742520),f=m(f,i=g(i,a,h,f,n[r+2],23,-995338651),a,h,n[r],6,-198630844),h=m(h,f,i,a,n[r+7],10,1126891415),a=m(a,h,f,i,n[r+14],15,-1416354905),i=m(i,a,h,f,n[r+5],21,-57434055),f=m(f,i,a,h,n[r+12],6,1700485571),h=m(h,f,i,a,n[r+3],10,-1894986606),a=m(a,h,f,i,n[r+10],15,-1051523),i=m(i,a,h,f,n[r+1],21,-2054922799),f=m(f,i,a,h,n[r+8],6,1873313359),h=m(h,f,i,a,n[r+15],10,-30611744),a=m(a,h,f,i,n[r+6],15,-1560198380),i=m(i,a,h,f,n[r+13],21,1309151649),f=m(f,i,a,h,n[r+4],6,-145523070),h=m(h,f,i,a,n[r+11],10,-1120210379),a=m(a,h,f,i,n[r+2],15,718787259),i=m(i,a,h,f,n[r+9],21,-343485551),f=d(f,e),i=d(i,o),a=d(a,u),h=d(h,c);return[f,i,a,h]}
        function a(n){var t,r="",e=32*n.length;for(t=0;t<e;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}
        function h(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var e=8*n.length;for(t=0;t<e;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}
        function e(n){var t,r,e="0123456789abcdef",o="";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),o+=e.charAt(t>>>4&15)+e.charAt(15&t);return o}
        function r(n){return unescape(encodeURIComponent(n))}
        function o(n){return a(i(h(t=r(n)),8*t.length));var t}
        function u(n,t){return function(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,16<o.length&&(o=i(o,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}(r(n),r(t))}
        function t(n,t,r){return t?r?u(t,n):e(u(t,n)):r?o(n):e(o(n))}
        "function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:n.md5=t;
    }(this);
</script>


<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '30875151c07a20ceb163',
    clientSecret: '9a57fd47038f45827326ab5b0ab8c796f184a46f',
    repo: 'rakuyomo.github.io',
    owner: 'rakuyoMo',
    admin: ['rakuyoMo'],
    id: md5(location.pathname),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false       // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

            

            
        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first"></div>
    <div class="social-container">
        
            
                <a href="https://github.com/rakuyoMo" target="_blank">
                    <i class="fab fa-github gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        æ— å¸¸ä¸ºå¸¸ï¼Œå˜åŒ–å³æ°¸æ’
    </div>
    <div>
        Theme <a href="https://github.com/rakuyoMo/gridea-theme-pure" target="_blank">Pure</a>, Powered by <a
                href="https://gridea.dev" target="_blank">Gridea</a> | <a href="https://blog.rakuyo.dev/atom.xml" target="_blank">RSS</a>
    </div>
</div>

<script>
  hljs.highlightAll()
</script>

    </div>
</div>
</body>
</html>
